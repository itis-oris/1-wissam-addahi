public List<Room> getALlRooms() {
        List<Room> rooms = new ArrayList<>();
        String sql = "SELECT * FROM ReadingRooms";



public Room getRoomById(int id) {
    String sql = "SELECT * FROM ReadingRooms WHERE id = " + id;




public boolean addRoom(Room room) {
       String sql = "INSERT INTO ReadingRooms (number, name, capacity, address) VALUES (?, ?, ?, ?)";




public boolean updateRoom(Room room) {
   String sql = "UPDATE ReadingRooms SET name = '" + room.getName() + "', capacity = " + room.getCapacity() + ", address = '" + room.getAddress() + "' WHERE id = " + room.getId();



public boolean deleteRoom(int id) {
     String sql = "DELETE FROM ReadingRooms WHERE id = " + id;



public Room getRoomByNumber(int number) {
    String sql = "SELECT * FROM ReadingRooms WHERE number = " + number;




public List<Book> listBooksByRoom(int roomNumber) {
    Room room = getRoomByNumber(roomNumber);
    List<Book> books = new ArrayList<>();
    List<CopiesBookByRoom> copiesBookByRooms = new ArrayList<>();
    String sql = "SELECT * FROM CopiesBookByRoom WHERE idRoom = " + room.getId();


public int getCountBookByRoom (int idRoom , int idBook) {
    int count = 0;
    String sql = "SELECT * FROM CopiesBookByRoom WHERE idRoom = " + idRoom + " AND idBook = " + idBook;


public boolean editCountBookByRoom (int idRoom, int idBook , int count) {
    String sql = "UPDATE CopiesBookByRoom SET count = " + count + " WHERE idRoom = " + idRoom  + " AND idBook = " + idBook;


public boolean editCountByDeleteBookInRoom(int idRoom /*roomNumber*/, int idBook /*String code*/ , int countDelete) {
    if (getCountBookByRoom(idRoom /*roomNumber*/,idBook /*code*/) < countDelete) {
        return false;
    }
    String sql = "UPDATE CopiesBookByRoom SET count = (count - " + countDelete + ") WHERE idRoom = " + /*room.getId()*/ idRoom + " AND idBook = " + idBook /*book.getId()*/;



public boolean editCountBooksByAdding(int idRoom,int idBook , int countAdd) {
    String sql = "UPDATE CopiesBookByRoom SET count = ( count + " + countAdd + " ) WHERE idRoom = " +  idRoom + " AND idBook = " + idBook ;



public boolean addCopiesNewBookToRooms (int idRoom, int idBook, int count) {
    String sql = "INSERT INTO CopiesBookByRoom (idRoom,idBook,count) VALUES ("+ idRoom +","+ idBook +"," + count + ")";



public boolean assignedBookToReader(String cardNumber,String bookCode) {
    Reader reader = readerDAO.getReaderByCard(cardNumber);
    Book book = bookDAO.getBookByCode(bookCode);
    if (!isAlreadyHavecopy(reader.getId(),book.getId())) {
        if (editCountByDeleteBookInRoom(reader.getIdRoom(), book.getId(), 1)) {
            String sql = "INSERT INTO AssignedBookToReader (idBook,idReader) VALUES (" + book.getId() + "," + reader.getId() + ")";



public boolean isAlreadyHavecopy(int idReader,int idBook) {
    String sql = "SELECT * FROM AssignedBookToReader WHERE idBook = " + idBook + " AND idReader = " + idReader ;




public boolean returnBookFromReader(String cardNumber, String bookCode) {
    Reader reader = readerDAO.getReaderByCard(cardNumber);
    Book book = bookDAO.getBookByCode(bookCode);
    if (editCountBooksByAdding(reader.getIdRoom(),book.getId(),1)) {
        String sql = "DELETE FROM AssignedBookToReader WHERE idBook = " + book.getId() + " AND idReader = " + reader.getId();




